function P(e,n){return typeof e=="function"?e(...n):!!e}function T(){}var m=(e=>(e.All="All",e.Tech="Tech",e.News="News",e.Music="Music",e.Sports="Sports",e.Gaming="Gaming",e.Movies="Movies",e.Education="Education",e.Science="Science",e))(m||{}),i=(e=>(e.URL="url",e.AUTH="auth",e.USERS="users",e))(i||{});async function p({searchMethodParam:e,searchActionParam:n,method:r,body:a,queryParams:o,request:d}){var y;const S=typeof window>"u",h=new URLSearchParams;if(o)for(const[s,c]of Object.entries(o))c!==void 0&&h.append(s,String(c));let u=`/api/proxy?${e}=${n}`;h.toString()&&(u+=`&${h.toString()}`);const f={"Content-Type":"application/json"};if(S&&d){u=`${new URL(d.url).origin}${u}`;const c=d.headers.get("Cookie");c&&(f.Cookie=c)}const w={method:r,headers:f,credentials:"same-origin"};a&&(r==="POST"||r==="PATCH")&&(w.body=JSON.stringify(a));const t=await fetch(u,w);if(!t.ok)throw console.error(`Fetch failed: ${t.status} ${t.statusText}`),new Error(`HTTP error! Status: ${t.status}`);try{const s=(y=t.headers.get("Content-Type"))!=null&&y.includes("application/json")?await t.json():null;if(!s)throw console.warn("Response is empty or not JSON:",await t.text()),new Error("Invalid or empty response from server.");return s}catch(s){throw console.error("Failed to parse response as JSON:",s),new Error("An error occurred while processing the response.")}}async function l(e,n,r,a,o){if(!e)throw new Error("ID is required for updating a URL.");return p({method:"PATCH",searchMethodParam:i.URL,searchActionParam:"update",queryParams:{id:e,short_url:n,original_url:r,category:a},body:{short_url:n,original_url:r,category:a},request:o})}async function v(e,n,r,a){return p({method:"POST",searchMethodParam:i.URL,searchActionParam:"create",body:{short_url:n,original_url:e,category:r},queryParams:{short_url:n,original_url:e,category:r},request:a})}async function R(e,n,r,a,o){return p(a?{method:"GET",searchMethodParam:i.URL,searchActionParam:"view",queryParams:{id:a},request:o}:{method:"GET",searchMethodParam:i.URL,searchActionParam:"view",queryParams:{limit:e==null?void 0:e.toString(),offset:n==null?void 0:n.toString(),category:r},request:o})}export{i as S,m as U,v as c,p as d,R as f,T as n,P as s,l as u};
