var q=e=>{throw TypeError(e)};var I=(e,t,r)=>t.has(e)||q("Cannot "+r);var o=(e,t,r)=>(I(e,t,"read from private field"),r?r.call(e):t.get(e)),v=(e,t,r)=>t.has(e)?q("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),h=(e,t,r,s)=>(I(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import{r as R,j as W}from"./jsx-runtime-CAOzMBF_.js";var G=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},P=typeof window>"u"||"Deno"in globalThis;function le(){}function fe(e,t){return typeof e=="function"?e(t):e}function X(e){return typeof e=="number"&&e>=0&&e!==1/0}function he(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ye(e,t){return typeof e=="function"?e(t):e}function de(e,t){return typeof e=="function"?e(t):e}function ve(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:u,queryKey:y,stale:i}=e;if(y){if(s){if(t.queryHash!==Y(y,t.options))return!1}else if(!k(t.queryKey,y))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||n&&n!==t.state.fetchStatus||u&&!u(t))}function be(e,t){const{exact:r,status:s,predicate:n,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(x(t.options.mutationKey)!==x(u))return!1}else if(!k(t.options.mutationKey,u))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function Y(e,t){return((t==null?void 0:t.queryKeyHashFn)||x)(e)}function x(e){return JSON.stringify(e,(t,r)=>M(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function k(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!k(e[r],t[r])):!1}function g(e,t){if(e===t)return e;const r=D(e)&&D(t);if(r||M(e)&&M(t)){const s=r?e:Object.keys(e),n=s.length,u=r?t:Object.keys(t),y=u.length,i=r?[]:{};let c=0;for(let w=0;w<y;w++){const l=r?w:u[w];(!r&&s.includes(l)||r)&&e[l]===void 0&&t[l]===void 0?(i[l]=void 0,c++):(i[l]=g(e[l],t[l]),i[l]===e[l]&&e[l]!==void 0&&c++)}return n===y&&c===n?e:i}return t}function me(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function D(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function M(e){if(!N(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!N(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function N(e){return Object.prototype.toString.call(e)==="[object Object]"}function Z(e){return new Promise(t=>{setTimeout(t,e)})}function we(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?g(e,t):t}function pe(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function je(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var ee=Symbol();function Ee(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ee?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var p,b,E,U,te=(U=class extends G{constructor(){super();v(this,p);v(this,b);v(this,E);h(this,E,t=>{if(!P&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){o(this,b)||this.setEventListener(o(this,E))}onUnsubscribe(){var t;this.hasListeners()||((t=o(this,b))==null||t.call(this),h(this,b,void 0))}setEventListener(t){var r;h(this,E,t),(r=o(this,b))==null||r.call(this),h(this,b,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){o(this,p)!==t&&(h(this,p,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof o(this,p)=="boolean"?o(this,p):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},p=new WeakMap,b=new WeakMap,E=new WeakMap,U),re=new te,S,m,F,z,se=(z=class extends G{constructor(){super();v(this,S,!0);v(this,m);v(this,F);h(this,F,t=>{if(!P&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){o(this,m)||this.setEventListener(o(this,F))}onUnsubscribe(){var t;this.hasListeners()||((t=o(this,m))==null||t.call(this),h(this,m,void 0))}setEventListener(t){var r;h(this,F,t),(r=o(this,m))==null||r.call(this),h(this,m,t(this.setOnline.bind(this)))}setOnline(t){o(this,S)!==t&&(h(this,S,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return o(this,S)}},S=new WeakMap,m=new WeakMap,F=new WeakMap,z),H=new se;function ne(){let e,t;const r=new Promise((n,u)=>{e=n,t=u});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},r.reject=n=>{s({status:"rejected",reason:n}),t(n)},r}function ie(e){return Math.min(1e3*2**e,3e4)}function ue(e){return(e??"online")==="online"?H.isOnline():!0}var B=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Se(e){return e instanceof B}function Fe(e){let t=!1,r=0,s=!1,n;const u=ne(),y=a=>{var f;s||(T(new B(a)),(f=e.abort)==null||f.call(e))},i=()=>{t=!0},c=()=>{t=!1},w=()=>re.isFocused()&&(e.networkMode==="always"||H.isOnline())&&e.canRun(),l=()=>ue(e.networkMode)&&e.canRun(),J=a=>{var f;s||(s=!0,(f=e.onSuccess)==null||f.call(e,a),n==null||n(),u.resolve(a))},T=a=>{var f;s||(s=!0,(f=e.onError)==null||f.call(e,a),n==null||n(),u.reject(a))},K=()=>new Promise(a=>{var f;n=d=>{(s||w())&&a(d)},(f=e.onPause)==null||f.call(e)}).then(()=>{var a;n=void 0,s||(a=e.onContinue)==null||a.call(e)}),L=()=>{if(s)return;let a;const f=r===0?e.initialPromise:void 0;try{a=f??e.fn()}catch(d){a=Promise.reject(d)}Promise.resolve(a).then(J).catch(d=>{var Q;if(s)return;const O=e.retry??(P?0:3),C=e.retryDelay??ie,_=typeof C=="function"?C(r,d):C,$=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,d);if(t||!$){T(d);return}r++,(Q=e.onFail)==null||Q.call(e,r,d),Z(_).then(()=>w()?void 0:K()).then(()=>{t?T(d):L()})})};return{promise:u,cancel:y,continue:()=>(n==null||n(),u),cancelRetry:i,continueRetry:c,canStart:l,start:()=>(l()?L():K().then(L),u)}}function ae(){let e=[],t=0,r=i=>{i()},s=i=>{i()},n=i=>setTimeout(i,0);const u=i=>{t?e.push(i):n(()=>{r(i)})},y=()=>{const i=e;e=[],i.length&&n(()=>{s(()=>{i.forEach(c=>{r(c)})})})};return{batch:i=>{let c;t++;try{c=i()}finally{t--,t||y()}return c},batchCalls:i=>(...c)=>{u(()=>{i(...c)})},schedule:u,setNotifyFunction:i=>{r=i},setBatchNotifyFunction:i=>{s=i},setScheduler:i=>{n=i}}}var Oe=ae(),j,A,Pe=(A=class{constructor(){v(this,j)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),X(this.gcTime)&&h(this,j,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(P?1/0:5*60*1e3))}clearGcTimeout(){o(this,j)&&(clearTimeout(o(this,j)),h(this,j,void 0))}},j=new WeakMap,A),V=R.createContext(void 0),Te=e=>{const t=R.useContext(V);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Le=({client:e,children:t})=>(R.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),W.jsx(V.Provider,{value:e,children:t}));export{Le as Q,Pe as R,G as S,de as a,Oe as b,Fe as c,ue as d,Ee as e,me as f,ye as g,x as h,Se as i,P as j,X as k,re as l,Y as m,le as n,ve as o,ne as p,be as q,we as r,ee as s,he as t,Te as u,je as v,pe as w,H as x,fe as y,k as z};
